<h1 class="h3 mb-2 text-gray-800">Productos</h1>

<%= search_form_for @q do |f| %>
  <%= f.label :nombre_producto_cont %>
  <%= f.search_field :nombre_producto_cont %>
  <%= f.submit %>
<% end %>


       <div class="d-flex align-items-center">
	  <%= form_tag( '/buscar_productos' , options = {class: "w-100 me-3"}) do %>
	  <%= text_field_tag("termino", value = nil, options = {class: "form-control", placeholder: "Buscar..."}) %>
	  <%end%>
       </div>
       <br />

<div>  
  <%= link_to new_product_path, { remote: true, class: "btn btn-info" }  do %>
    <span class="fas fa-plus-square" ></span>
  <% end %>
</div>
<br />
<div class="card shadow mb-4">
<div class="card-body">
    <div class="table-responsive">
    <table class="table table-bordered" id="tablaProductos" width="100%" cellspacing="0">
        <thead>
        <tr>
	    <th>Codigo producto</th>
            <th>Nombre producto</th>
            <th>Existencia</th>
            <th>Precio</th>
            <th>Categoria</th>
            <th>Unidad</th>
	    <th>Ubicacion</th>
	    <th></th>
        </tr>
        </thead>
        <tbody>
            <% @productos.each do |prod| %>
            <tr id="producto_<%= prod.id %>" >
	        <td><%= prod.codigo_producto %></td>
                <td><%= prod.nombre_producto %></td>
                <td><%= prod.existencia_producto %></td>
                <td>$<%= prod.precio_producto %></td>
                <td><%= prod.category != nil ? prod.category.nombre_categoria : "No tiene categoria" %></td>
                <td><%= prod.unit != nil ? prod.unit.nombre_unidad : "No tiene unidad" %></td>
		<td><%= prod.location != nil ? prod.location.nombre_lugar : "No tiene ubicacion" %></td>
                <td>
                <%= link_to "editar", edit_product_path(prod), html_options = {class: "btn btn-info btn-xs", remote: true} %>
                <%= link_to "Borrar", prod, remote: true, method: :delete, data: { confirm: "Borrar producto: #{prod.nombre_producto}?"}, class: "btn btn-danger btn-xs" %>
                </td>
            </tr>
            <% end %>
        </tbody>
    </table>
    </div>
  </div>
</div>
<div class="pdf_link">
    <%= link_to "Generate PDF", products_path(request.params.merge(format: :pdf)), class: "btn btn-primary" %>
</div>
<%= render 'modal_productos' %>
